ğŸ—ï¸ EduHan â€“ End-to-End Architecture & Core Features
Think of EduHan as 3 products in one platform, sharing a single identity & data backbone.

1ï¸âƒ£ WHAT ARE WE BUILDING? (High-level vision)
EduHan is a multi-tenant education platform that supports:


Schools (their own private environment)


Public instructors (marketplace model)


Students & parents (unified learning + tracking)


All of this runs on one backend, with membership-based access (which you already built).

2ï¸âƒ£ CORE ARCHITECTURAL PRINCIPLES (VERY IMPORTANT)
These principles drive every technical decision:
ğŸ”‘ 1. Identity is global, access is contextual


A Person exists once


A Membership defines:


which tenant


which role




One user â†’ many roles â†’ many tenants


âœ… You already implemented this correctly.

ğŸ§± 2. Hard separation between:


Identity & Access (Auth)


Academic domain


Learning content


Operations (attendance, transport, fees)


This avoids future rewrites.

ğŸ§© 3. Everything is tenant-scoped


No query should ever return data without tenant context


JWT always contains tenantId + membershipId



3ï¸âƒ£ SYSTEM ARCHITECTURE (Logical Layers)
ğŸ”¹ A. Client Layer (multiple frontends)


School Admin Web App


Teacher Web App


Student/Parent Web + Mobile


Instructor Creator Dashboard


(Later) Public Marketplace


All clients talk to the same API, using role-based access.

ğŸ”¹ B. API Layer (NestJS â€“ what weâ€™re building)
Split into modules, not microservices (for now).
src/
â”œâ”€â”€ auth/              â†’ login, JWT, guards
â”œâ”€â”€ admin/             â†’ tenant & platform admin
â”œâ”€â”€ users/             â†’ person-level ops
â”œâ”€â”€ memberships/       â†’ role & tenant mapping
â”œâ”€â”€ students/
â”œâ”€â”€ parents/
â”œâ”€â”€ teachers/
â”œâ”€â”€ academics/         â†’ classes, sections, years
â”œâ”€â”€ attendance/
â”œâ”€â”€ courses/
â”œâ”€â”€ assessments/
â”œâ”€â”€ notifications/
â”œâ”€â”€ payments/
â”œâ”€â”€ reports/
â””â”€â”€ common/             â†’ guards, decorators, utils

You are currently finishing auth + admin.

ğŸ”¹ C. Data Layer (Postgres + Prisma)
Already very solid:


Person


Tenant


Role


Membership


Role-specific profiles


Academic structures


Attendance events


This schema is future-proof.

4ï¸âƒ£ CORE FEATURE SET (PHASED, REALISTIC)
ğŸŸ¢ PHASE 1 â€“ School Core (MVP)
This is what schools will pay for first.
ğŸ” Identity & Access


Login (done)


Role-based access (next)


Tenant isolation (done)


ğŸ« School Management


Students


Parents


Teachers


Class â†’ Section â†’ Academic Year


Enrollment


ğŸ•˜ Attendance


Manual attendance


RFID / biometric events


Parent visibility


ğŸ“¢ Notifications


Admin â†’ parents


Teacher â†’ students


System alerts



ğŸŸ¡ PHASE 2 â€“ Learning & Evaluation
This is where EduHan becomes a learning platform, not just ERP.
ğŸ“š Courses


School-created courses


Public instructor courses


Course assignment to students


ğŸ“ Assessments


Tests


Assignments


Auto/manual grading


Progress tracking


ğŸ“Š Reports


Student progress


Attendance reports


Teacher performance



ğŸ”µ PHASE 3 â€“ Marketplace + Monetization
This is where EduHan scales.
ğŸ›’ Marketplace


Public instructors publish courses


Schools buy licenses


Revenue sharing


ğŸ’³ Payments


Subscriptions (schools)


Course purchases


Instructor payouts



5ï¸âƒ£ ROLE MODEL (CRITICAL FOR EVERYTHING)
RoleScopeKey CapabilitiesPLATFORM_ADMINGlobalManage tenants, billingSCHOOL_ADMINTenantUsers, classes, reportsTEACHERTenantAttendance, coursesSTUDENTTenantLearning, testsPARENTTenantTracking, notificationsPUBLIC_INSTRUCTORGlobalCreate & sell courses
You already encoded this correctly in Prisma.

6ï¸âƒ£ API SECURITY MODEL
Every protected request will follow this flow:


JWT validated


Membership extracted


Tenant context enforced


Role guard applied


Controller executes


Example:
@UseGuards(JwtAuthGuard, RolesGuard)
@Roles(RoleType.SCHOOL_ADMIN)
@Post('students')


7ï¸âƒ£ DEPLOYMENT ARCHITECTURE (SIMPLE, SCALABLE)
Initial


Docker Compose


Single API


Single DB


Later (no rewrite)


API â†’ Horizontal scale


DB â†’ Read replicas


Redis â†’ caching & queues


S3 â†’ files/media



8ï¸âƒ£ WHAT WE SHOULD BUILD NEXT (STRATEGIC)
Now that auth + tenant works, the correct next order is:
ğŸ”¹ Step C2a â€“ Seed & Bootstrap


Platform roles


Demo admin


Dev fixtures


ğŸ”¹ Step C2 â€“ Student & Parent modules


CRUD


Parentâ€“student linking


Visibility rules


ğŸ”¹ Step C3 â€“ RBAC Guards


Enforce role permissions


Lock APIs


This keeps momentum without chaos.

9ï¸âƒ£ IMPORTANT QUESTION FOR YOU (ONE ANSWER ONLY)
To guide architecture decisions, answer one thing when youâ€™re ready:
ğŸ‘‰ Who is the primary paying customer initially?


Schools?


Individual instructors?


Hybrid from day one?


That answer affects:


Feature priority


UI flows


Billing design



When youâ€™re refreshed, weâ€™ll lock this architecture and then continue building without backtracking.
Just say:

â€œLetâ€™s finalize the architectureâ€
or
â€œProceed with Step C2aâ€

Youâ€™re building this the right way.